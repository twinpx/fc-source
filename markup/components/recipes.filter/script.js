!function(a){"use strict";a(function(){function b(){function b(){c()}function c(){function b(){function b(){document.getElementById("filter_list").className=d,a("#filter_list").slideDown("middle")}var c=a(this),d=c.parent().data("type");return a("#filter_list").hasClass(d)?void a("#filter_list").slideUp("middle",function(){document.getElementById("filter_list").className=""}):(b(),!1)}a("#filter_recipes").delegate(".b-filter__item__button","click",b)}b()}function c(){function b(){return document.getElementById("filter_list")?void c():!1}function c(){a("#filter_list").click(function(a){a.stopPropagation()}).delegate("a","click",e),a("#get_more_recipes a").click(f);var b=i(window.location.search).page;b&&f(1*b-2)}function e(){if(a("#filter_recipes").hasClass("i-link"))return!0;var b=document.getElementById("filter_list").className,c=a(this).data("id");return a.ajax({url:a("#filter_recipes").data("ajax-url"),dataType:"html",data:"type="+b+"&data="+c,beforeSend:function(){a("#recipe_feed_block").empty().html('<div class="preloader"><img src="/images/preloader.gif" width="281" height="52" alt="" /></div>')},success:function(b){a("#recipe_feed_block").append(b).find(".preloader").remove(),a("#recipe_feed_block .b-recipe-thumb__photo").lazyload()},error:d}),a("#filter_list").hide().empty(),!1}function f(b){var c=a("#get_more_recipes a").data("id"),d={};return a.ajax({url:a("#get_more_recipes").data("more-url"),dataType:"html",data:"id="+c+"&p="+(a(".b-recipe-feed__wrapper").length+1),beforeSend:function(){a("#get_more_recipes").addClass("preload")},success:function(c){a("#get_more_recipes").removeClass("preload");var e=a('<div class="b-recipe-feed__wrapper"></div>');e.html(c),a("#recipe_feed_block").append(e).find(".b-recipe-feed__wrapper:last").addClass("i-animate"),e.find(".b-recipe-thumb__photo").lazyload(),a.scrollTo(a("#recipe_feed_block .b-recipe-feed__wrapper:last .b-recipe-thumb:first").offset().top-200+"px",1e3),g(),window.history&&(window.location.search&&(d=i(window.location.search)),d.page=a(".b-recipe-feed__wrapper").length+1,history.replaceState({},"",h(d))),b&&b>0&&f(--b)}}),!1}function g(){}function h(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return"?"+b.join("&")}function i(a){for(var b={},c=("?"===a[0]?a.substr(1):a).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1]||"")}return b}var j=this;j.recipesPerPage=6,j.makeRequest=!0,b()}function d(a,b,c){window.console&&(console.log(a),console.log(b),console.log(c))}a(document).bind("click",function(){a("#filter_list:visible").slideUp("fast")}),a(function(){new b,new c})})}(jQuery);